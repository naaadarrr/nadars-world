# å¦‚ä½•åœ¨å…¶ä»–é¡¹ç›®ä¸­ä½¿ç”¨ macOS X ç»„ä»¶

## ğŸ“‹ å®Œæ•´æ­¥éª¤æŒ‡å—

### ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡ä½ çš„ React é¡¹ç›®

å‡è®¾ä½ æœ‰ä¸€ä¸ª React é¡¹ç›®ï¼Œé¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š

```
my-react-app/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ App.tsx
â”‚   â”œâ”€â”€ index.tsx
â”‚   â””â”€â”€ index.css
â”œâ”€â”€ public/
â”œâ”€â”€ package.json
â””â”€â”€ ...
```

### ç¬¬äºŒæ­¥ï¼šå¤åˆ¶ç»„ä»¶åŒ…

å°†æ•´ä¸ª `macosx-components` æ–‡ä»¶å¤¹å¤åˆ¶åˆ°ä½ çš„é¡¹ç›®æ ¹ç›®å½•ï¼š

```bash
# æ–¹æ³•1: ä½¿ç”¨å‘½ä»¤è¡Œå¤åˆ¶
cp -r /path/to/ryos/macosx-components /path/to/my-react-app/

# æ–¹æ³•2: æ‰‹åŠ¨å¤åˆ¶
# ç›´æ¥å°† macosx-components æ–‡ä»¶å¤¹æ‹–æ‹½åˆ°ä½ çš„é¡¹ç›®æ ¹ç›®å½•
```

å¤åˆ¶åä½ çš„é¡¹ç›®ç»“æ„åº”è¯¥æ˜¯ï¼š

```
my-react-app/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ App.tsx
â”‚   â”œâ”€â”€ index.tsx
â”‚   â””â”€â”€ index.css
â”œâ”€â”€ macosx-components/     â† æ–°å¤åˆ¶çš„ç»„ä»¶åŒ…
â”‚   â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ styles/
â”‚   â”œâ”€â”€ index.ts
â”‚   â””â”€â”€ ...
â”œâ”€â”€ public/
â”œâ”€â”€ package.json
â””â”€â”€ ...
```

### ç¬¬ä¸‰æ­¥ï¼šå®‰è£…ä¾èµ–

åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•è¿è¡Œï¼š

```bash
npm install framer-motion zustand
```

æˆ–è€…ä½¿ç”¨ yarnï¼š

```bash
yarn add framer-motion zustand
```

### ç¬¬å››æ­¥ï¼šå¯¼å…¥æ ·å¼

åœ¨ä½ çš„ `src/index.tsx` æˆ– `src/App.tsx` æ–‡ä»¶é¡¶éƒ¨æ·»åŠ æ ·å¼å¯¼å…¥ï¼š

```tsx
// src/App.tsx
import React from 'react';
import './macosx-components/styles/macos.css'; // â† æ·»åŠ è¿™è¡Œ

function App() {
  return <div className="App">{/* ä½ çš„åº”ç”¨å†…å®¹ */}</div>;
}

export default App;
```

### ç¬¬äº”æ­¥ï¼šä½¿ç”¨ç»„ä»¶

ç°åœ¨ä½ å¯ä»¥åœ¨ä»»ä½•ç»„ä»¶ä¸­ä½¿ç”¨ macOS X ç»„ä»¶äº†ï¼š

#### ç¤ºä¾‹ 1: åŸºç¡€çª—å£

```tsx
// src/App.tsx
import React from 'react';
import './macosx-components/styles/macos.css';
import { MacOSWindow, MacOSThemeProvider } from './macosx-components';

function App() {
  return (
    <MacOSThemeProvider>
      <div className="min-h-screen bg-gradient-to-br from-blue-400 to-purple-600 p-8">
        <MacOSWindow
          title="æˆ‘çš„åº”ç”¨"
          onClose={() => console.log('çª—å£å…³é—­')}
          onMinimize={() => console.log('çª—å£æœ€å°åŒ–')}
          onMaximize={() => console.log('çª—å£æœ€å¤§åŒ–')}
          isForeground={true}
        >
          <div className="p-6">
            <h1 className="text-2xl font-bold mb-4">æ¬¢è¿ä½¿ç”¨ macOS é£æ ¼çª—å£ï¼</h1>
            <p className="text-gray-600">è¿™æ˜¯ä¸€ä¸ªå®Œå…¨å¯æ‹–æ‹½å’Œè°ƒæ•´å¤§å°çš„çª—å£ã€‚</p>
            <button className="mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
              ç‚¹å‡»æˆ‘
            </button>
          </div>
        </MacOSWindow>
      </div>
    </MacOSThemeProvider>
  );
}

export default App;
```

#### ç¤ºä¾‹ 2: èŠå¤©åº”ç”¨

```tsx
// src/ChatDemo.tsx
import React, { useState } from 'react';
import { ChatApp, MacOSThemeProvider, ChatMessage } from './macosx-components';

function ChatDemo() {
  const [messages, setMessages] = useState<ChatMessage[]>([
    {
      id: '1',
      content: 'ä½ å¥½ï¼æˆ‘æ˜¯ AI åŠ©æ‰‹ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®ä½ çš„å—ï¼Ÿ',
      role: 'assistant',
      username: 'AIåŠ©æ‰‹',
      createdAt: new Date(),
    },
  ]);

  const handleSendMessage = async (messageText: string) => {
    // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
    const userMessage: ChatMessage = {
      id: `user-${Date.now()}`,
      content: messageText,
      role: 'user',
      username: 'æˆ‘',
      createdAt: new Date(),
    };
    setMessages((prev) => [...prev, userMessage]);

    // æ¨¡æ‹Ÿ AI å›å¤
    setTimeout(() => {
      const aiMessage: ChatMessage = {
        id: `ai-${Date.now()}`,
        content: `æˆ‘æ”¶åˆ°äº†ä½ çš„æ¶ˆæ¯ï¼š"${messageText}"ã€‚è¿™æ˜¯ä¸€ä¸ªè‡ªåŠ¨å›å¤ï¼`,
        role: 'assistant',
        username: 'AIåŠ©æ‰‹',
        createdAt: new Date(),
      };
      setMessages((prev) => [...prev, aiMessage]);
    }, 1000);
  };

  return (
    <MacOSThemeProvider>
      <div className="min-h-screen bg-gradient-to-br from-green-400 to-blue-600 p-8">
        <ChatApp
          title="AI èŠå¤©åŠ©æ‰‹"
          onClose={() => console.log('èŠå¤©å…³é—­')}
          currentUserId="æˆ‘"
          initialMessages={messages}
          onSendMessage={handleSendMessage}
          showNudgeButton={true}
          showVoiceButton={false}
          emptyStateMessage="å¼€å§‹å’Œ AI åŠ©æ‰‹èŠå¤©å§ï¼"
        />
      </div>
    </MacOSThemeProvider>
  );
}

export default ChatDemo;
```

#### ç¤ºä¾‹ 3: å¤šä¸ªçª—å£

```tsx
// src/MultiWindowDemo.tsx
import React, { useState } from 'react';
import { MacOSWindow, MacOSThemeProvider } from './macosx-components';

function MultiWindowDemo() {
  const [windows, setWindows] = useState([
    { id: 1, title: 'è®¡ç®—å™¨', x: 100, y: 100, isForeground: true },
    { id: 2, title: 'è®°äº‹æœ¬', x: 200, y: 150, isForeground: false },
    { id: 3, title: 'è®¾ç½®', x: 300, y: 200, isForeground: false },
  ]);

  const bringToForeground = (id: number) => {
    setWindows((prev) =>
      prev.map((window) => ({
        ...window,
        isForeground: window.id === id,
      })),
    );
  };

  const closeWindow = (id: number) => {
    setWindows((prev) => prev.filter((window) => window.id !== id));
  };

  return (
    <MacOSThemeProvider>
      <div className="min-h-screen bg-gradient-to-br from-purple-400 to-pink-600 p-8">
        {windows.map((window) => (
          <div
            key={window.id}
            style={{
              position: 'absolute',
              left: window.x,
              top: window.y,
              zIndex: window.isForeground ? 10 : 1,
            }}
            onClick={() => bringToForeground(window.id)}
          >
            <MacOSWindow
              title={window.title}
              onClose={() => closeWindow(window.id)}
              isForeground={window.isForeground}
              windowConstraints={{
                minWidth: 300,
                minHeight: 200,
              }}
            >
              <div className="p-6">
                <h2 className="text-xl font-semibold mb-4">{window.title}</h2>
                <p className="text-gray-600 mb-4">è¿™æ˜¯ {window.title} çª—å£çš„å†…å®¹ã€‚</p>
                <p className="text-sm text-gray-500">
                  çª—å£ ID: {window.id}
                  <br />
                  å‰å°çŠ¶æ€: {window.isForeground ? 'æ˜¯' : 'å¦'}
                </p>
              </div>
            </MacOSWindow>
          </div>
        ))}
      </div>
    </MacOSThemeProvider>
  );
}

export default MultiWindowDemo;
```

### ç¬¬å…­æ­¥ï¼šåœ¨ä¸»åº”ç”¨ä¸­ä½¿ç”¨

æ›´æ–°ä½ çš„ `src/App.tsx` æ¥ä½¿ç”¨è¿™äº›ç»„ä»¶ï¼š

```tsx
// src/App.tsx
import React, { useState } from 'react';
import './macosx-components/styles/macos.css';
import ChatDemo from './ChatDemo';
import MultiWindowDemo from './MultiWindowDemo';

function App() {
  const [currentDemo, setCurrentDemo] = useState<'chat' | 'windows' | 'basic'>('basic');

  const renderDemo = () => {
    switch (currentDemo) {
      case 'chat':
        return <ChatDemo />;
      case 'windows':
        return <MultiWindowDemo />;
      default:
        return (
          <div className="min-h-screen bg-gradient-to-br from-blue-400 to-purple-600 flex items-center justify-center">
            <div className="text-center text-white">
              <h1 className="text-4xl font-bold mb-8">macOS X ç»„ä»¶æ¼”ç¤º</h1>
              <div className="space-x-4">
                <button
                  onClick={() => setCurrentDemo('chat')}
                  className="px-6 py-3 bg-white text-blue-600 rounded-lg font-semibold hover:bg-gray-100"
                >
                  èŠå¤©æ¼”ç¤º
                </button>
                <button
                  onClick={() => setCurrentDemo('windows')}
                  className="px-6 py-3 bg-white text-blue-600 rounded-lg font-semibold hover:bg-gray-100"
                >
                  å¤šçª—å£æ¼”ç¤º
                </button>
              </div>
            </div>
          </div>
        );
    }
  };

  return (
    <div className="App">
      {currentDemo !== 'basic' && (
        <button
          onClick={() => setCurrentDemo('basic')}
          className="fixed top-4 left-4 z-50 px-4 py-2 bg-black text-white rounded hover:bg-gray-800"
        >
          è¿”å›ä¸»é¡µ
        </button>
      )}
      {renderDemo()}
    </div>
  );
}

export default App;
```

## ğŸ¯ å…³é”®è¦ç‚¹

1. **æ–‡ä»¶è·¯å¾„**: ç»„ä»¶å¯¼å…¥è·¯å¾„æ˜¯ `'./macosx-components'`ï¼ˆç›¸å¯¹äºä½ çš„æºæ–‡ä»¶ï¼‰
2. **æ ·å¼å¯¼å…¥**: å¿…é¡»å¯¼å…¥ `'./macosx-components/styles/macos.css'`
3. **ä¸»é¢˜æä¾›è€…**: æ‰€æœ‰ç»„ä»¶éƒ½éœ€è¦åŒ…è£¹åœ¨ `<MacOSThemeProvider>` ä¸­
4. **ä¾èµ–**: ç¡®ä¿å®‰è£…äº† `framer-motion` å’Œ `zustand`

## ğŸ”§ å¸¸è§é—®é¢˜

### Q: æ ·å¼æ²¡æœ‰ç”Ÿæ•ˆæ€ä¹ˆåŠï¼Ÿ

A: ç¡®ä¿æ­£ç¡®å¯¼å…¥äº† CSS æ–‡ä»¶ï¼š`import './macosx-components/styles/macos.css';`

### Q: ç»„ä»¶æ‰¾ä¸åˆ°æ€ä¹ˆåŠï¼Ÿ

A: æ£€æŸ¥æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿ `macosx-components` æ–‡ä»¶å¤¹åœ¨é¡¹ç›®æ ¹ç›®å½•

### Q: TypeScript æŠ¥é”™æ€ä¹ˆåŠï¼Ÿ

A: ç¡®ä¿å®‰è£…äº†ç±»å‹ä¾èµ–ï¼Œæˆ–è€…åœ¨ `tsconfig.json` ä¸­æ·»åŠ è·¯å¾„æ˜ å°„

### Q: å¦‚ä½•è‡ªå®šä¹‰ä¸»é¢˜ï¼Ÿ

A: å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰ä¸»é¢˜å¯¹è±¡ä¼ é€’ç»™ `MacOSThemeProvider`

## ğŸ“š æ›´å¤šèµ„æº

- æŸ¥çœ‹ `macosx-components/examples/` ç›®å½•è·å–æ›´å¤šç¤ºä¾‹
- é˜…è¯» `macosx-components/README.md` äº†è§£å®Œæ•´ API
- æŸ¥çœ‹ `macosx-components/types/index.ts` äº†è§£ç±»å‹
